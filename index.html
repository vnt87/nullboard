<!doctypehtml><meta charset="utf-8"><meta name="viewport"content="width=device-width,initial-scale=1"><title>Nullboard</title><link rel="icon"href="extras/favicon-16.png"><style>@font-face{font-family:f-barlow;font-weight:400;font-style:normal;src:url('extras/Barlow-Regular.woff') format('woff')}@font-face{font-family:f-barlow;font-weight:500;font-style:normal;src:url('extras/Barlow-Medium.woff') format('woff')}@font-face{font-family:f-ibm-plex;font-weight:400;font-style:normal;src:url('extras/IBMPlexSans-Regular.woff') format('woff')}@font-face{font-family:f-ibm-plex;font-weight:500;font-style:normal;src:url('extras/IBMPlexSans-Medium.woff') format('woff')}@font-face{font-family:f-open-sans;font-weight:400;font-style:normal;src:url('extras/OpenSans-Regular.woff') format('woff')}@font-face{font-family:f-open-sans;font-weight:500;font-style:normal;src:url('extras/OpenSans-600.woff') format('woff')}@font-face{font-family:f-segoe-ui;font-weight:400;font-style:normal;src:local('Segoe UI')}@font-face{font-family:f-segoe-ui;font-weight:500;font-style:normal;src:local('Segoe UI Semibold')}@font-face{font-family:f-maven-pro;font-weight:400;font-style:normal;src:url('extras/MavenPro-Regular.woff') format('woff')}@font-face{font-family:f-maven-pro;font-weight:500;font-style:normal;src:url('extras/MavenPro-500.woff') format('woff')}html{--ff:f-barlow,sans-serif;--fs:16;--lh:calc( var(--fs) * 1.25 );--fs-head:13.6;--fs-nops:9;--lw:calc(20 * var(--fs) + 30)}body,html,input,textarea{font-family:var(--ff);font-size:calc( var(--fs) * 1px);line-height:calc( var(--lh) * 1px)}html.f-ibm-plex{--ff:f-ibm-plex,sans-serif;--fs:11;--fs-head:12.5;--lw:calc(20 * var(--fs) + 40)}html.f-open-sans{--ff:f-open-sans,sans-serif;--fs:11;--fs-head:12.5;--lw:calc(20 * var(--fs) + 50)}html.f-segoe-ui{--ff:f-segoe-ui,sans-serif;--fs:11;--fs-head:13;--fs-nops:8;--lw:calc(22 * var(--fs) + 40)}html.f-maven-pro{--ff:f-maven-pro,sans-serif;--fs:12;--fs-head:13;--lw:calc(20 * var(--fs) + 47)}body,h1,html,input,textarea{padding:0;margin:0}body{background:#fff;background:#f8f9fb}@keyframes shake{33%{margin-left:-5px}66%{margin-left:5px}100%{margin-left:0}}a{text-decoration:none;transition:color .2s}a,a:active,a:focus,input,textarea{outline:0}tt{display:none}.ding{animation-name:shake;animation-duration:.2s}.no-user-select{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.board:after,.clearfix:after,.head:after,.lists:after,.menu:after,.notes:after{content:"";display:table;clear:both}body.dragging{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.board{min-width:calc(var(--lw) * 1px);width:-moz-max-content;width:-webkit-max-content;width:intrinsic;margin:0 auto;padding:20px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.crowded .board{margin-top:28px}.board u{text-decoration:none}.board u:before{content:'\00D7';position:relative;top:2px;font-size:calc(16rem / 11);line-height:calc(10 / 17);font-weight:400}.board .head{padding:5px 0;margin:1px 5px 0;position:relative}.board .head .edit,.board .head .text{font-weight:500;font-size:calc( var(--fs-head) / 11 * 1rem);line-height:calc( 20 / var(--fs-head));padding:0 5px 2px;border:none}.board .head .text{min-height:20px;white-space:pre;overflow:hidden}.board .head .edit{display:none}.board .head .edit::placeholder{font-weight:400;font-size:calc(10rem / 11);line-height:calc(22 / 10);text-transform:uppercase;color:#1489db;opacity:.8}.board .head.editing .text{display:none}.board .head.editing .edit{display:block;outline:1px solid #8eaedd}.board .menu{position:absolute;top:0;right:0;height:20px;padding:5px 6px 7px 30px;background:linear-gradient(to right,#eaeDF000,#eaedf0 10px);line-height:calc(20 / 11)}.board .menu a,.board .ops a{color:#000000A0;transition:color .2s}.board .menu a{padding-left:10px}.board .menu a:hover,.board .ops a:hover{color:#000}.board .menu a.warn:hover,.board .ops a.warn:hover{color:#c40}.board .menu .redo-board,.board .menu .undo-board{display:none}.board .head.editing .menu{display:none}.board>.head{background:#eaedf0;padding:5px;margin:0 0 10px;border-radius:2px;position:relative}.board>.head .menu{margin-right:5px}.board .lists-scroller{height:auto;margin:-1px 0 10px;overflow-x:auto;overflow-y:hidden;display:none}.lists-scroller div{height:1px}.board .lists{white-space:nowrap;overflow:auto;scrollbar-width:none}.board .list{display:inline-block;vertical-align:top;width:calc(var(--lw) * 1px);margin:0 5px 10px;background:linear-gradient(#eaedf0 30px,#dde1e5 90px);border-radius:2px}.board .list::-webkit-scrollbar{display:none}.board .list:first-child{margin-left:0}.board .list:last-child{margin-right:0}.board .list .notes{padding:0 5px}.board .head .menu .teaser{position:absolute;right:3px;top:5px;padding:0 3px}.board .head .menu .bulk{display:none;opacity:0;z-index:1}.board .head .menu:hover .bulk{display:block;opacity:1}.board .head .menu:hover .teaser{display:none}.board .list .menu .mov-list-r.half{padding-left:0}.board .list .menu .full{display:none}.board .list:first-child .menu .half,.board .list:last-child .menu .half{display:none}.board .list:first-child .menu .mov-list-r.full,.board .list:last-child .menu .mov-list-l.full{display:inline-block}.board .list:first-child:last-child .menu .full,.board .list:first-child:last-child .menu .half{display:none}.board .note{background:#fff;margin-top:5px;box-shadow:0 1px 2px #bbb,0 0 1px #ddd;position:relative}.board .note.dragging,.board .note.dragging.raw{background:#ced4da;box-shadow:0 +1px 0 #0001 inset,0 -1px 0 #0001 inset,+1px 0 0 #0001 inset,-1px 0 0 #0001 inset}.board .note.dragging *{opacity:0!important}.board .note:last-child{margin-bottom:5px}.board .note{padding-bottom:6px}.board .note .edit,.board .note .text{padding:5px 10px 0;margin-right:15px;min-height:100%}.board .note .text{white-space:pre-wrap;overflow-wrap:anywhere;min-height:calc(var(--lh) * 1px)}.board .head .text a,.board .note .text a{color:inherit;cursor:default;transition:none}@keyframes whoomp{0%{color:inherit}30%{color:#888}100%{color:inherit}}.board .head .text a:hover,.board .note .text a:hover{animation-name:whoomp;animation-duration:.7s}.reveal .board .head .text a,.reveal .board .note .text a{color:#1489db;cursor:pointer}.reveal .board .head .text a:hover,.reveal .board .note .text a:hover{animation-name:none}.board .note .edit{display:none;border:none}.board .note.editing{box-shadow:none;outline:1px solid #8eaedd}.board .note.editing .text{display:none}.board .note.editing .edit{display:block;resize:none}.board .note .ops{position:absolute;top:0;right:0;opacity:0;transition:opacity .4s;cursor:default;font-size:calc(9rem / 11)}.board .note.editing .ops{display:none}.board .note:hover .ops{opacity:1}.board .note .ops .teaser{display:block;margin-top:2px;margin-right:1px;padding-right:3px}.board .note .ops .teaser:before{content:'\2261'}.board .note .ops .bulk{display:none;background:#fff;border-left:none;padding:1px 0 2px 5px;font-size:calc( var(--fs-nops) * 1px);font-weight:500;border-left:1px solid #ddd;border-bottom:1px solid #ddd}.board .note .ops .bulk a{padding-right:4px}.board .note .ops:hover .bulk{display:block}.board .note .ops:hover .teaser{display:none}.board .note.raw{background:0 0;box-shadow:none;font-weight:500}.board .note.raw.editing{background:#fff}.board .note.collapsed{padding-bottom:6px}.board .note.collapsed .text,.note-dragster.collapsed .text{max-height:calc(var(--lh) * 1px);overflow:hidden;padding-bottom:0}.board .note.collapsed .ops{opacity:1}.board .note.collapsed .ops .teaser{padding:1px 3px 0 1px}.board .note.collapsed .ops .teaser:before{content:'_';top:1px}.board .note.collapsed:hover .ops .teaser:before{content:'\2261'}.note-dragster{z-index:2;position:absolute;opacity:0;background:#fff;white-space:pre-wrap;cursor:move;padding:5px 25px 6px 10px;box-shadow:0 +1px 0 #acb4bc inset,0 -1px 0 #acb4bc inset,+1px 0 0 #acb4bc inset,-1px 0 0 #acb4bc inset,0 1px 3px #00000030}.note-dragster a{color:#000}.logo{position:absolute;top:9px;left:9px;line-height:calc(19 / 11);padding:6px 12px;z-index:3;opacity:.6;background:#f8f9fb}.crowded .logo:hover{background:#fff;box-shadow:0 1px 2px rgba(0,0,0,.2)}.logo:hover{opacity:1}.logo .alert{display:none;font-style:normal;margin-left:5px;color:#d20}.logo .bulk{overflow:hidden;height:0;opacity:0;transition:opacity .4s;padding-top:1px}.logo:hover .bulk{height:auto;opacity:1}.logo .bulk a,.logo a.site{color:#000}.logo .bulk a:hover{color:#1489db}.logo .bulk a{display:block}.logo .bulk a:before{display:inline-block;content:'-';width:11px}.logo.updated{opacity:1}.logo.updated .alert{display:inline-block}.logo.updated .bulk .view-changes{color:#d20}.config{position:absolute;top:10px;right:21px;line-height:calc(19 / 11);z-index:3;background:#f8f9fb}.crowded .config:hover,.crowded.adjusting .config{background:#fff;box-shadow:0 1px 2px rgba(0,0,0,.2)}.config a{display:block;color:#000;transition:color .2s}.config a:hover{color:#1489db}.config .teaser{padding:5px;color:#999;position:relative}.config .teaser i{font-style:normal}.config .teaser u{display:none;text-decoration:none}.config .bulk{margin-right:20px;padding:5px 0 0 22px;transition:opacity .4s}.config .bulk .boards{display:none;padding:6px 2px;margin:6px -2px;border-top:1px solid #00000028;border-bottom:1px solid #00000028}.config .bulk .boards a.load-board{display:block;padding-left:5px;margin-left:-5px;transition:none}.config .bulk .boards a.load-board.active{color:#1489db}.config .bulk .boards a.load-board.active:before{content:'\2022 ';display:inline-block;width:13px;margin-left:-13px}.config .bulk .boards a.load-board.active:hover{color:#000}.config .bulk .boards a.load-board.dragging{background:#dde1e5;border-radius:2px;color:transparent;transition:none;box-shadow:0 0 1px #0002 inset}.config .bulk .boards a.load-board.dragging.active:before{content:''}.load-dragster{z-index:10;position:absolute;opacity:0;line-height:calc(19 / 11);padding-left:5px;background:#fff;color:#000;border-radius:2px;cursor:move;outline:1px solid #ACB4BC;box-shadow:0 1px 3px #00000030}.config .bulk a b,.config .bulk a i{font-style:normal;font-weight:inherit}.config .bulk a i{display:none}.config .bulk .break{padding:6px 2px 0;margin:6px -2px 0;border-top:1px solid #00000028}.config .bulk input.imp-board-select{position:absolute;width:1px;height:1px;visibility:hidden}.config.backups-on .teaser i{display:none}.config.backups-on .teaser u{display:inline-block;font-size:calc(8rem / 11);color:#555}.config.backups-on.backing-up .teaser u{opacity:.4}.config.backups-on .bulk .auto-backup:before{content:'\2713 ';display:inline-block;width:15px;margin-left:-15px}.config.backups-on.backup-err .teaser i{display:inline-block}.config.backups-on.backup-err .teaser u{display:inline-block;position:absolute;width:4px;height:4px;border-radius:10px;top:13px;right:-4px;background:#d20;color:transparent}.config.backups-on.backup-err .bulk .auto-backup{color:#d20}.config.backups-on.backup-err .bulk .auto-backup:before{content:'! ';color:#d20;width:13px;margin-left:-13px}.config .bulk .section .title{text-align:center;width:0;display:inline-block;white-space:pre;transition:width 250ms,padding 250ms}.config .bulk .section .title u{text-decoration:none;transition:opacity .1s}.config .bulk .section .details{height:0;opacity:0;transition:opacity 250ms;padding-right:8px;margin-right:-8px}.config .bulk .section.open{padding-bottom:8px;border-bottom:1px solid #00000028}.crowded .config .bulk .section.open{border-bottom:none}.config .bulk .section.open .title{width:100%;font-weight:500;padding-left:5px;transition:width 250ms,padding 250ms}.config .bulk .section.open .title u{opacity:0;transition:opacity .1s}.config .bulk .section.open .details{height:100%;opacity:1;transition:opacity 250ms}.config .bulk .ui-prefs .f-prefs table{width:10px;padding:0;margin:0;border-collapse:collapse}.config .bulk .ui-prefs .f-prefs td{margin:0;padding:0 0 0 5px}.config .bulk .ui-prefs .f-prefs td.name{width:100%;white-space:pre;padding-left:0}.config .bulk .ui-prefs .f-prefs tr td.val{text-align:center}.fs-set .config .bulk .ui-prefs .f-prefs tr.ui-fs td.val,.lh-set .config .bulk .ui-prefs .f-prefs tr.ui-lh td.val,.lw-set .config .bulk .ui-prefs .f-prefs tr.ui-lw td.val{color:#1489db;cursor:pointer}.config .bulk .ui-prefs .f-prefs a{display:inline-block;padding:0 2px;transition:padding 250ms}.config .bulk .ui-prefs .f-prefs a.less:hover{padding:0 4px 0 0;transition:padding 250ms}.config .bulk .ui-prefs .f-prefs a.more:hover{padding:0 0 0 4px;transition:padding 250ms}.config .bulk .ui-prefs .f-prefs a.more:hover{padding:0 0 0 4px;transition:padding 250ms}.config .bulk .ui-prefs .switch-font.active:before{content:'\2022 ';display:inline-block;width:13px;margin-left:-13px}.config .bulk{display:none;opacity:0}.adjusting .config .teaser,.config:hover .teaser{display:none}.adjusting .config .bulk,.config:hover .bulk{display:block;opacity:1}.adjusting *{cursor:row-resize!important}.overlay{position:fixed;z-index:10;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.9);color:#000;display:none;justify-content:center}.overlay>div{font-size:calc(12rem / 11);line-height:calc(16 / 12);background:#fff;align-self:start;margin-top:100px;border-radius:1px;box-shadow:0 2px 6px #000}.overlay>div.license{white-space:pre-wrap;padding:20px 25px 22px;overflow-y:auto;width:calc((var(--fs) * 36 + 6) * 1px)}.overlay>div.license a{color:#1489db}.overlay>div.license span{display:inline-block;padding-right:8px}.overlay>div.about{text-align:center;padding:50px 50px;position:relative}.overlay>div.about h1{font-size:calc(15rem / 11);font-weight:500;margin-bottom:10px}.overlay>div.about a{display:block;color:#1489db}.overlay>div.about div{position:absolute;bottom:-30px;left:0;width:100%;color:#fff9}.overlay>div.about div span{display:inline-block;text-align:left;padding-right:10px}.overlay .backup-conf{padding:20px 40px;min-width:300px;position:relative}.overlay .backup-conf .close{position:absolute;top:0;right:12px;font-size:calc(22rem / 11);color:#000;opacity:.3;transition:opacity .3s}.overlay .backup-conf .close:hover{opacity:1;transition:opacity .3s}.overlay .backup-conf h3{font-size:calc(15rem / 11);font-weight:500;text-align:center;margin:20px 0 0 0}.overlay .backup-conf .what{display:block;text-align:center;border-bottom:1px solid #888;margin:0 -10px 20px;padding:0 10px 30px}.overlay .backup-conf .what a{color:#1489db}.overlay .backup-conf .opt{margin-top:5px}.overlay .backup-conf .opt:before{--col:#333;content:' ';display:inline-block;margin-top:-1px;display:inline-block;content:' ';width:calc(9rem / 11);height:calc(9rem / 11);margin-right:8px;position:relative;top:1px;background:var(--col);border:1px solid var(--col);border-radius:1px;box-shadow:0 2px 0 #fff inset,0 -2px 0 #fff inset,2px 0 0 #fff inset,-2px 0 0 #fff inset}.overlay .backup-conf .opt:hover:before{--col:#1489db}.overlay .backup-conf .off .opt:before{background:#fff}.overlay .backup-conf .opt:hover{color:#1489db}.overlay .backup-conf .opt{cursor:pointer}.overlay .backup-conf .etc{margin-top:3px;margin-bottom:10px;margin-left:calc(9rem / 22);padding:2px 0 0 14px;border-left:1px solid #888}.overlay .backup-conf .off .etc{display:none}.overlay .backup-conf .etc span{display:inline-block;min-width:calc(3px + var(--fs) * 7px);margin-right:calc(var(--fs) * 1px)}.overlay .backup-conf .etc input{display:inline-block;width:170px;padding:0 5px;line-height:calc(20 / 11);margin-bottom:3px;border:1px solid #ccc}.overlay .backup-conf .etc input:focus{border-bottom:1px solid #888}.overlay .backup-conf .etc input::placeholder{font-weight:400;font-size:calc(10rem / 11);line-height:calc(20 / 10);text-transform:uppercase;color:#000;opacity:.4}.overlay .backup-conf .etc .status{display:none;margin:0}.overlay .backup-conf .etc .status input{color:#222;background:#0000000E;border:1px solid transparent}.overlay .backup-conf .etc .status.error input{color:#d20;background:#dd220018}.overlay .backup-conf .save{display:block;text-align:center;margin:20px -10px 5px;padding:20px 10px 0;border-top:1px solid #888;word-spacing:30px;position:relative}.overlay .backup-conf .save a{color:#1489db}.overlay .backup-conf.off .save .check{color:#aaa;pointer-events:none;cursor:default}@media print{.board .head .teaser,.config,.list .head .teaser,.logo{visibility:hidden;display:none}.board .note{box-shadow:none;text-shadow:none!important;outline:1px solid #888}.list{outline:1px solid #555}.board .note .raw{outline:0;text-shadow:none}.board .head .text a,.board .note .text a{color:#333;text-shadow:none;text-decoration:underline}}.theme-dark body{background:#09090a;color:#d6d6d6}.theme-dark .board .head{background:#17171a}.theme-dark .board .menu{background:linear-gradient(to right,#17171a00,#17171a 10px)}.theme-dark .board .menu a{color:#aaa}.theme-dark .board .menu a:hover{color:#fc4}.theme-dark .board .menu a.warn:hover,.theme-dark .board .ops a.warn:hover{color:#fc5555!important;text-shadow:0 0 1px #fc555544}.theme-dark .board .head{color:#eee}.theme-dark .board .head .edit::placeholder{color:#bf9d21}.theme-dark .board>.head{box-shadow:0 0 2px #fff1 inset}.theme-dark .board .list{background:#17171a;box-shadow:0 0 2px #fff1 inset}.theme-dark .board .note{background:linear-gradient(#242426,#202022);box-shadow:0 1px 3px #000a;text-shadow:0 0 4px #0008}.theme-dark .reveal .board .head .text a,.theme-dark .reveal .board .note .text a{color:#fc0}@keyframes whoomp-dark{0%{color:inherit}30%{color:#fff}100%{color:inherit}}.theme-dark .board .head .text a:hover,.theme-dark .board .note .text a:hover{animation-name:whoomp-dark}.theme-dark .board .note.raw{background:0 0;box-shadow:none}.theme-dark .board .note.raw .text{color:#eee;text-shadow:0 0 4px #0008}.theme-dark .board .note .ops .teaser{color:#ccc}.theme-dark .board .note .ops .bulk{background:#202022;border-left:1px solid #111;border-bottom:1px solid #111}.theme-dark .board .note.raw .ops .bulk{border:none}.theme-dark .board .note .ops .bulk a{color:#ccc}.theme-dark .board .note .ops .bulk a:hover{color:#fc2}.theme-dark .board .note.dragging,.theme-dark .board .note.dragging.raw{background:#09090a;outline:1px solid #fff2}.theme-dark .note-dragster{box-shadow:0 1px 4px #000;background:linear-gradient(#242426,#202022);outline:1px solid #fc28}.theme-dark .note-dragster a{color:#d6d6d6}.theme-dark .wrap input,.theme-dark .wrap textarea{background:#111315;color:#eee}.theme-dark .board .head.editing .edit{outline:1px solid #bc9908}.theme-dark .board .note.editing{background:#111315;outline:1px solid #bc9908}.theme-dark .logo a{color:#ccc}.theme-dark .logo,.theme-dark.crowded .logo:hover{background:#09090a!important}.theme-dark .logo a:hover{color:#fc2}.theme-dark .logo>a:hover{color:#fff}.theme-dark .config,.theme-dark.crowded .config:hover{background:#09090a!important}.theme-dark .config a{color:#ddd}.theme-dark .config a:hover{color:#fc2}.theme-dark .config .bulk .boards{border-top:1px solid #fff2;border-bottom:1px solid #fff2}.theme-dark .config .bulk .boards a.load-board.active{color:#fc2}.theme-dark .config .bulk .boards a.load-board.active:hover{color:#ddd}.theme-dark .config .bulk .break{border-top:1px solid #fff2}.theme-dark.fs-set .config .bulk .ui-prefs .f-prefs tr.ui-fs td.val,.theme-dark.lh-set .config .bulk .ui-prefs .f-prefs tr.ui-lh td.val,.theme-dark.lw-set .config .bulk .ui-prefs .f-prefs tr.ui-lw td.val{color:#fc2}.theme-dark .config a.switch-theme i{display:inline}.theme-dark .config a.switch-theme b{display:none}.theme-dark .config .bulk .boards .load-board.active.dragging,.theme-dark .config .bulk .boards .load-board.dragging{background:#fff2;color:transparent}.theme-dark .load-dragster{background:#09090a;box-shadow:0 2px 4px #000;outline:1px solid #fc2a;color:#ddd}</style><div class="logo"><a class="site"href="https://nullboard.io">Nullboard</a> <i class="alert"></i><div class="bulk"><a href="#"class="view-about">About</a> <a href="#"class="view-license">License</a> <a href="https://nullboard.io/changes"target="_blank"class="view-changes">Changes</a> <a href="https://nullboard.io/github"target="_blank">Github</a> <a href="https://nullboard.io/twitter"target="_blank">Twitter</a></div></div><div class="config no-user-select"><a href="#"class="teaser"><i>&equiv;</i><u>&#x2714;</u></a><div class="bulk"><a href="#"class="add-board">Add new board...</a><div class="boards"draggable="false"></div><a href="#"class="exp-board">Export current board...</a> <a href="#"class="imp-board">Import boards...</a> <input class="imp-board-select"type="file"accept=".nbx"> <a href="#"class="auto-backup">Auto-backup...</a><div class="section ui-prefs break"><a href="#"class="title">UI preferences<u>...</u></a><div class="details"><a href="#"class="switch-font active break"font="barlow">Use Barlow</a> <a href="#"class="switch-font"font="ibm-plex">Use IBM Plex Sans</a> <a href="#"class="switch-font"font="open-sans">Use Open Sans</a> <a href="#"class="switch-font"font="segoe-ui">Use Segoe UI</a> <a href="#"class="switch-font"font="maven-pro">Use Maven Pro</a><div class="f-prefs break"><table><tr class="ui-fs"><td class="name">Font size:<td><a href="#"class="less">&lt;</a><td class="val"><td><a href="#"class="more">&gt;</a><tr class="ui-lh"><td class="name">Line height:<td><a href="#"class="less">&lt;</a><td class="val"><td><a href="#"class="more">&gt;</a><tr class="ui-lw"><td class="name">List width:<td><a href="#"class="less">&lt;</a><td class="val"><td><a href="#"class="more">&gt;</a></table></div><a href="#"class="switch-theme break">Use <i>light</i><b>dark</b> theme</a></div></div></div></div><div class="wrap"></div><div class="overlay"></div><tt><div class="board"><div class="head"><div class="text"></div><input class="edit"spellcheck="false"placeholder="Name of the board"><div class="menu"><a href="#"class="teaser">&equiv;</a><div class="bulk"><a href="#"class="del-board warn"><u></u> Board</a> <a href="#"class="undo-board">Undo</a> <a href="#"class="redo-board">Redo</a> <a href="#"class="add-list">+ List</a></div></div></div><div class="lists-scroller"><div></div></div><div class="lists"></div></div><div class="list"><div class="head"><div class="text"></div><input class="edit"spellcheck="false"placeholder="Name of the list"><div class="menu"><a href="#"class="teaser">&equiv;</a><div class="bulk"><a href="#"class="del-list warn"><u></u> List</a> <a href="#"class="mov-list-l full">&lt; Move</a> <a href="#"class="mov-list-l half">&lt; Mo</a><a href="#"class="mov-list-r half">ve &gt;</a> <a href="#"class="mov-list-r full">Move &gt;</a> <a href="#"class="add-note">+ Note</a></div></div></div><div class="notes"></div></div><div class="note"><div class="ops"><a href="#"class="teaser"></a><div class="bulk"><a href="#"class="del-note warn">X</a> <a href="#"class="raw-note">R</a> <a href="#"class="collapse">_</a></div></div><div class="text"></div><textarea class="edit"spellcheck="false"></textarea></div><a href="#"class="load-board"></a> <textarea class="encoder"></textarea><div class="about"><h1>Nullboard</h1>Minimalist locally-stored kanban board <a href="https://nullboard.io"target="_blank">https://nullboard.io</a><div></div></div><div class="license"></div><div class="backup-conf"><a href="#"class="close">&times;</a><h3>Auto-backup</h3><div class="what"><a href="https://nullboard.io/backups"target="_blank">What is this?</a></div><div class="loc"><div class="opt">Local backup</div><div class="etc"><span>Access token</span> <input class="auth"placeholder="required"><br><p class="status"><span>Status</span> <input disabled="disabled"></div></div><div class="rem"><div class="opt">Remote backup</div><div class="etc"><span>URL</span> <input class="base"placeholder="API entry point"><br><span>Access token</span> <input class="auth"placeholder="required"><br><p class="status"><span>Status</span> <input disabled="disabled"></div></div><div class="save"><a href="#"class="check">Check...</a> <a href="#"class="ok">Save</a></div></div></tt><script src="extras/jquery-3.6.0.min.js"></script><script>window.jQuery||document.write('<script src="https://code.jquery.com/jquery-3.6.0.min.js"><\/script>')</script><script>Number.prototype.clamp=function(r,n){return Math.min(Math.max(this,r),n)};var confirm_org=window.confirm,alert_org=window.alert;window.confirm=function(r){return confirm_org(r+"\n ")},window.alert=function(r){return alert_org(r+"\n ")}</script><script>function AppConfig(){this.verLast=null,this.verSeen=null,this.maxUndo=50,this.fontName=null,this.fontSize=null,this.lineHeight=null,this.listWidth=null,this.theme=null,this.fileLinks=!1,this.board=null,this.backups={agents:[],nextId:1},this.backupStatus={}}const default_backup_agents=[{base:"http://127.0.0.1:10001",auth:""},{base:"",auth:""}];function BoardMeta(){this.title="",this.current=1,this.ui_spot=0,this.history=[],this.backupStatus={}}class Storage{constructor(){this.type="?",this.conf=new AppConfig,this.boardIndex=new Map,this.backups={status:"",agents:[]}}open(){return this.openInner()}wipe(){return this.wipeInner()}getConfig(){return this.conf}setVerLast(){return this.conf.verLast==NB.codeVersion||(this.conf.verLast=NB.codeVersion,this.saveConfig())}setVerSeen(t){return this.conf.verSeen=t||NB.codeVersion,this.saveConfig()}setActiveBoard(t){if(console.log("setActiveBoard ["+this.conf.board+"] -> ["+t+"]"),!(!t||this.boardIndex.get(t)))throw`Invalid board_id in setActiveBoard(... ${t})`;return this.conf.board==t||(this.conf.board=t,this.saveConfig())}setTheme(t){if(this.conf.theme!=t)return this.conf.theme=t,this.saveConfig()}setFontName(t){if(this.conf.fontName!=t)return this.conf.fontName=t,this.saveConfig()}setFontSize(t){if(this.conf.fontSize!=t)return this.conf.fontSize=t,this.saveConfig()}setLineHeight(t){if(this.conf.lineHeight!=t)return this.conf.lineHeight=t,this.saveConfig()}setListWidth(t){if(this.conf.listWidth!=t)return this.conf.listWidth=t,this.saveConfig()}saveConfig(){return this.backupConfig(),this.setJson("config",this.conf)}getBoardIndex(){return this.boardIndex}saveBoard(t){var e,s,o=this.boardIndex.get(t.id);if(delete t.history,o){var i=t.revision,n=o.history[0]+1;t.revision=n,e=this.setJson("board."+t.id+"."+t.revision,t),o.title=t.title||"(Untitled board)",o.current=t.revision;var a=[t.revision];for(var r of o.history)i<r&&r<n||a.length>=this.conf.maxUndo?(this.delItem("board."+t.id+"."+r),console.log(`Deleted revision ${r} of ${t.id} (${t.title})`)):a.push(r);o.history=a}else t.revision=1,e=this.setJson("board."+t.id+"."+t.revision,t),(o=new BoardMeta).title=t.title||"(Untitled board)",o.current=t.revision,o.history=[t.revision],this.boardIndex.set(t.id,o);return(s=this.setJson("board."+t.id+".meta",o)&&this.setJson("board."+t.id,o.current))&&e&&this.backupBoard(t.id,t,o),t.history=o.history,console.log(`Saved revision ${t.revision} of ${t.id} (${t.title}), ok = ${e} | ${s}`),e&&s}loadBoard(t,e){var s=this.boardIndex.get(t);if(!s)throw`Invalid board_id in loadBoard(${t}, ${e})`;if(null==e&&(e=s.current),!s.history.includes(e))throw`Invalid revision in loadBoard(${t}, ${e})`;var o=this.getJson("board."+t+"."+e);return!!o&&(o.format!=NB.blobVersion?(console.log("Board "+t+"/"+e+" format is unsupported"),console.log("Have ["+o.format+"], need ["+NB.blobVersion),!1):o.revision!=e?(console.log("Board "+t+"/"+e+" revision is wrong"),console.log("Have ["+o.revision+"]"),!1):(o.history=s.history,console.log(`Loaded revision ${o.revision} of ${o.id} (${o.title})`),Object.assign(new Board,o)))}nukeBoard(t){var e=this.boardIndex.get(t);if(!e)throw`Invalid board_id in nukeBoard(${t})`;var s=e.title+"";for(var o of e.history)this.delItem("board."+t+"."+o);this.delItem("board."+t+".meta"),this.boardIndex.delete(t),this.backups.agents.forEach((function(e){e.nukeBoard(t)})),console.log(`Deleted board ${t} (${s})`)}getBoardHistory(t){var e=this.boardIndex.get(t);if(!e)throw`Invalid board_id in getBoardHistory(${t})`;return e.history}setBoardRevision(t,e){var s=this.boardIndex.get(t);if(!s)throw`Invalid board_id in setBoardRevision(${t}, ${e})`;if(!s.history.includes(e))throw`Invalid revision in setBoardRevision(${t}, ${e})`;return s.current==e||(s.current=e,this.backupBoard(t,null,s),this.setJson("board."+t+".meta",s)&&this.setJson("board."+t,e))}setBoardUiSpot(t,e){var s=this.boardIndex.get(t);if(!s)throw`Invalid board_id in setBoardUiSpot(${t}, ${e})`;return s.ui_spot=e,this.backupBoard(t,null,s),this.setJson("board."+t+".meta",s)}getItem(t){throw"implement-me"}setItem(t){throw"implement-me"}delItem(t){throw"implement-me"}openInner(){throw"implement-me"}wipeInner(){throw"implement-me"}getJson(t){var e=this.getItem(t);if(!e)return!1;try{e=JSON.parse(e)}catch(t){return!1}return e}setJson(t,e){return!!this.setItem(t,JSON.stringify(e))||(console.log("setJson("+t+") failed"),!1)}fixupConfig(t){var e=this.conf,s=(new SimpleBackup).type;e.board&&!this.boardIndex.has(e.board)&&(e.board=null),e||t||(e.verLast=20210327,e.verSeen=20200220);var o=e.backups.agents;if(2!=o.length||o[0].type!=s||"http://127.0.0.1:10001"!=o[0].conf.base||o[1].type!=s){const t=default_backup_agents;console.log("Unexpected backup config, will re-initialize.",o),e.backups.agents=[],e.backups.agents.push({type:s,id:s+"-"+e.backups.nextId++,enabled:t[0].base&&t[0].auth,conf:t[0]}),e.backups.agents.push({type:s,id:s+"-"+e.backups.nextId++,enabled:t[1].base&&t[1].auth,conf:t[1]}),this.saveConfig()}}initBackups(t){var e=this;e.backups.agents=[],t(null),this.conf.backups.agents.forEach((function(s){var o=NB.backupTypes.get(s.type);if(o){if(s.enabled){var i=new o(s.id,s.conf,t);e.backups.agents.push(i),console.log(`Added backup agent - type '${i.type}', id '${i.id}'`),i.checkStatus(null)}}else console.log(`Unknown backup type "${s.type}" - skipped`)}))}backupBoard(t,e,s){var o=this,i=s.backupStatus||{};s.backupStatus={},this.backups.agents.length?(console.log(`Backing up ${t}...`),this.backups.agents.forEach((function(n){var a=i[n.id]||{};e&&delete a.data,s&&delete a.meta,s.backupStatus[n.id]=a,n.saveBoard(t,e,s,(function(i){var r="Backup of "+t+(e?"":" (meta)");console.log(`${r} to '${n.id}' -> ${i?"ok":"failed"}`),i&&(e&&(a.data=+new Date),s&&(a.meta=+new Date),s.backupStatus[n.id]=a),o.setJson("board."+t+".meta",s)}))}))):(i.data||i.meta)&&o.setJson("board."+t+".meta",s)}backupConfig(){var t=this,e=t.conf.backupStatus||{};t.conf.backupStatus={},this.backups.agents.length?this.backups.agents.forEach((function(e){var s={};t.conf.backupStatus[e.id]=s,e.saveConfig(t.conf,(function(o){o&&(s.conf=+new Date,t.conf.backupStatus[e.id]=s),t.setJson("config",t.conf)}))})):e.conf&&this.setJson("config",this.conf)}}class Storage_Local extends Storage{constructor(){super(),this.type="LocalStorage"}getItem(t){return localStorage.getItem("nullboard."+t)}setItem(t,e){return localStorage.setItem("nullboard."+t,e),!0}delItem(t){return localStorage.removeItem("nullboard."+t),!0}openInner(){var t=this.getJson("config"),e=!0;if(t)this.conf=Object.assign(new AppConfig,t);else{if(this.conf.theme=this.getItem("theme"),"z1"==this.getItem("fsize")&&(this.conf.fontSize=13,this.conf.lineHeight=17),!this.setJson("config",this.conf))return this.conf=null,!1;this.conf.board=this.getItem("last_board")}this.boardIndex=new Map;for(var s=0;s<localStorage.length;s++){if(n=localStorage.key(s).match(/^nullboard\.board\.(\d+).meta$/)){var o=parseInt(n[1]);if((a=this.getJson("board."+o+".meta")).hasOwnProperty("history")){for(var i of a.history)if(!this.getJson("board."+o+"."+i)){console.log(`Invalid revision ${i} in history of ${o}`),a=this.rebuildMeta(o);break}a&&(delete a.backingUp,delete a.needsBackup,a=Object.assign(new BoardMeta,a),this.boardIndex.set(o,a))}else console.log(`Invalid meta for board ${o}`)}}for(s=0;s<localStorage.length;s++){var n;if(n=localStorage.key(s).match(/^nullboard\.board\.(\d+)$/)){e=!1;var a;o=parseInt(n[1]);if(!this.boardIndex.has(o))(a=this.rebuildMeta(o))&&(a=Object.assign(new BoardMeta,a),this.boardIndex.set(o,a))}}return this.fixupConfig(e),this.type="LocalStorage",!0}wipeInner(){for(var t=0;t<localStorage.length;){var e=localStorage.key(t);e.match(/^nullboard\./)?localStorage.removeItem(e):t++}this.conf=new AppConfig,this.boardIndex=new Map}rebuildMeta(t){var e=new BoardMeta;console.log(`Rebuilding meta for ${t} ...`),e.current=this.getItem("board."+t);for(var s=new RegExp("^nullboard.board."+t+".(\\d+)$"),o=new Array,i=0;i<localStorage.length;i++){var n=localStorage.key(i).match(s);n&&o.push(parseInt(n[1]))}if(!o.length)return console.log("* No revisions found"),this.delItem("board."+t),!1;o.sort((function(t,e){return e-t})),e.history=o,e.history.includes(e.current)||(e.current=e.history[e.history.length-1]);var a=this.getJson("board."+t+"."+e.current);return e.title=a.title||"(untitled board)",this.setJson("board."+t+".meta",e),e}}class BackupStorage{constructor(t,e,s){this.type="?",this.id=t,this.conf=e,this.status="",this.lastOp="",this.lastXhr={op:"",text:"",code:0},this.onStatusChange=s,this.queue=[]}checkStatus(t){return!1}saveConfig(t,e){throw"implement-me"}saveBoard(t,e,s,o){throw"implement-me"}nukeBoard(t,e){throw"implement-me"}}class SimpleBackup extends BackupStorage{constructor(t,e,s){super(t,null,s),this.type="simp",this.conf={base:"",auth:""},this.conf=Object.assign(this.conf,e)}checkStatus(t){this.queue.push({what:"checkStatus",cb:t,args:{url:this.conf.base+"/config",type:"put",headers:{"X-Access-Token":this.conf.auth},data:{self:document.location.href},dataType:"json"}}),this.runQueue()}saveConfig(t,e){this.queue.push({what:"saveConfig",cb:e,args:{url:this.conf.base+"/config",type:"put",headers:{"X-Access-Token":this.conf.auth},data:{self:document.location.href,conf:JSON.stringify(t)},dataType:"json"}}),this.runQueue()}saveBoard(t,e,s,o){this.queue.push({what:"saveBoard",cb:o,args:{url:this.conf.base+"/board/"+t,type:"put",headers:{"X-Access-Token":this.conf.auth},data:{self:document.location.href,data:e?JSON.stringify(e):null,meta:s?JSON.stringify(s):null},dataType:"json"}}),this.runQueue()}nukeBoard(t,e){this.queue.push({what:"saveBoard",cb:e,args:{url:this.conf.base+"/board/"+t,type:"delete",headers:{"X-Access-Token":this.conf.auth}}}),this.runQueue()}runQueue(){var t=this;if(this.queue.length&&"busy"!=this.status){var e=this.queue.shift();this.setStatus("busy",e.what),$.ajax(e.args).done((function(s,o,i){t.onRequestDone(e,!0,i)})).fail((function(s,o,i){t.onRequestDone(e,!1,s)}))}}onRequestDone(t,e,s){console.log(`Backup agent '${this.id}', ${this.lastOp}() -> ${e?"ok":"failed"}`);var o=s.status,i=s.responseText||(o?`Response code ${o}`:"Offline or CORS-blocked");this.lastXhr={text:i,code:o},t.cb&&t.cb.call(this,e),this.queue.length?(this.status="pre-busy",this.runQueue()):this.setStatus(e?"ready":"error",this.lastOp)}setStatus(t,e){if("busy"==t&&"busy"==this.status)throw`Backup agent ${this.id} is already busy!`;console.log(`Backup agent '${this.id}' status: '${this.status}' -> '${t}'`),this.status=t,this.lastOp=e,this.onStatusChange(this)}}</script><script>function Note(t){this.text=t,this.raw=!1,this.min=!1}function List(t){this.title=t,this.notes=[],this.addNote=function(t){var i=new Note(t);return this.notes.push(i),i}}function Board(t){this.format=NB.blobVersion,this.id=+new Date,this.revision=0,this.title=t||"",this.lists=[],this.addList=function(t){var i=new List(t);return this.lists.push(i),i}}</script><script>function Drag2(){this.listSel=null,this.itemSel=null,this.dragster=null,this.onDragging=function(t){},this.swapAnimMs=200,this.item=null,this.priming=null,this.primeXY={x:0,y:0},this.$drag=null,this.mouseEv=null,this.delta={x:0,y:0},this.inSwap=0,this.prime=function(t,i){var e=this;this.item=t,this.priming=setTimeout((function(){e.onPrimed.call(e)}),i.altKey?1:500),this.primeXY={x:i.clientX,y:i.clientY},this.mouseEv=i},this.cancelPriming=function(){this.item&&this.priming&&(clearTimeout(this.priming),this.priming=null,this.item=null)},this.end=function(){this.cancelPriming(),this.stopDragging()},this.isActive=function(){return this.item&&null==this.priming},this.onPrimed=function(){clearTimeout(this.priming),this.priming=null,removeTextSelection();var t=$(this.item);t.addClass("dragging"),$("body").append("<div class="+this.dragster+"></div>");var i=$("body ."+this.dragster).last();i.outerWidth(t.outerWidth()),i.outerHeight(t.outerHeight()),this.$drag=i,this.onDragging&&this.onDragging.call(this,!0);var e=$(window),s=e.scrollLeft(),n=e.scrollTop(),o=t.offset();this.delta.x=o.left-this.mouseEv.clientX-s,this.delta.y=o.top-this.mouseEv.clientY-n,this.adjustDrag(),i.css({opacity:1}),$("body").addClass("dragging")},this.adjustDrag=function(){if(this.$drag){var t=this,i=this.$drag,e=$(window),s=e.scrollLeft(),n=e.scrollTop(),o=t.mouseEv.clientX+t.delta.x+s,r=t.mouseEv.clientY+t.delta.y+n;if(i.offset({left:o,top:r}),!t.inSwap){var l,a=i.offset(),h=a.left+i.width()/2-e.scrollLeft(),g=a.top+i.height()/2-e.scrollTop(),m=null,p=null,u=!1;if($(this.listSel).each((function(){var i,e,s=this,n=s.getBoundingClientRect(),o=null,r=null;h<=n.left||n.right<=h||($(s).find(t.itemSel).each((function(){var n=this.getBoundingClientRect();(!o||n.top<i)&&(o=this,i=n.top),(!r||e<n.bottom)&&(r=this,e=n.bottom),g<=n.top||n.bottom<=g||this!=t.item&&(m=s,p=this,u=g<(n.top+n.bottom)/2)})),g<n.top?(m=s,p=o,u=!0):g>=n.bottom&&(m=s,p=r,u=!1))})),m){if(p){if(p==t.item)return;if(l=$(p),!u&&l.next()[0]==t.item||u&&l.prev()[0]==t.item)return}var d=t.item,c=$(d),f=c.clone();if(f.css({display:"none"}),p)u?(f.insertBefore(l),f=l.prev()):(f.insertAfter(l),f=l.next());else{var v=$(m);f=v.append(f).find(t.itemSel)}if(t.item=f[0],!t.swapAnimMs)return c.remove(),void f.show();if(m==d.parentNode){var w=c.offset().top-l.offset().top,x=0,D=0,S=$();if(w<0)for(var y=c.next();y.length&&y[0]!=f[0];y=y.next())S=S.add(y);else for(y=f.next();y.length&&y[0]!=c[0];y=y.next())S=S.add(y);function b(){c.parent().css({position:""}),c.remove(),f.show(),S.css({position:"","z-index":"",top:""}),t.adjustDrag()}x=c.outerHeight(!0),D=S.last().offset().top+S.last().outerHeight(!0)-S.first().offset().top,w<0?x=-x:D=-D,c.parent().css({position:"relative"}),c.css({position:"relative","z-index":0}),S.css({position:"relative","z-index":1}),t.inSwap=1+S.length,c.animate({top:D},t.swapAnimMs,(function(){--t.inSwap||b()})),S.animate({top:x},t.swapAnimMs,(function(){--t.inSwap||b()}))}else t.inSwap=1,f.slideDown(t.swapAnimMs),c.slideUp(t.swapAnimMs,(function(){c.remove(),t.inSwap=0,t.adjustDrag()}))}}}},this.onMouseMove=function(t){if(this.mouseEv=t,this.item)if(this.priming){var i=t.clientX-this.primeXY.x,e=t.clientY-this.primeXY.y;i*i+e*e>25&&this.onPrimed()}else this.adjustDrag()},this.stopDragging=function(){$(this.item).removeClass("dragging"),$("body").removeClass("dragging"),this.$drag&&(this.$drag.remove(),this.$drag=null,removeTextSelection(),this.onDragging&&this.onDragging.call(this,!1)),this.item=null}}</script><script>function VarAdjust(){this.onChange=null,this.onFinish=null,this.startY=0,this.used=!1,this.start=function(s,n,t){if(n){this.onChange=n,this.onFinish=t,this.startY=s.clientY,this.used=!1;var i=this;setTimeout((function(){i.onChange&&($("body").addClass("adjusting"),i.used=!0)}),250)}},this.onMouseMove=function(s){this.onChange&&($("body").addClass("adjusting"),self.used=!0,this.onChange(s.clientY-this.startY))},this.end=function(){this.onChange&&($("body").removeClass("adjusting"),this.onChange=null,this.onFinish&&this.onFinish())}}</script><script>var easyMartina=!1;function addNote(e,t,o){var a=$("tt .note").clone(),n=e.find(".notes");a.find(".text").html(""),a.addClass("brand-new"),o&&o.length?(o.before(a),a=o.prev()):t&&t.length?(t.after(a),a=t.next()):(n.append(a),a=n.find(".note").last()),a.find(".text").click()}function deleteNote(e){e.animate({opacity:0},"fast").slideUp("fast").queue((function(){e.remove(),saveBoard()}))}function noteLocation(e){for(var t=0,o=e.closest(".note");o.length;o=o.prev(),t+=1);for(o=e.closest(".list");o.length;o=o.prev(),t+=1e4);return t}function addList(){var e=$(".wrap .board"),t=e.find(".lists"),o=$("tt .list").clone();o.find(".text").html(""),o.find(".head").addClass("brand-new"),t.append(o),e.find(".lists .list .head .text").last().click();var a=t[0];a.scrollLeft=Math.max(0,a.scrollWidth-a.clientWidth),setupListScrolling()}function deleteList(e){var t=!0;e.find(".note .text").each((function(){t&=0==$(this).html().length})),(t||confirm("Delete this list and all its notes?"))&&(e.animate({opacity:0}).queue((function(){e.remove(),saveBoard()})),setupListScrolling())}function moveList(e,t){var o=e,a=t?o.prev():o.next(),n=o.find("> .head .menu .bulk"),i=a.find("> .head .menu .bulk"),r=o.offset().left,s=a.offset().left;o.css({position:"relative"}),a.css({position:"relative"}),n.hide(),i.hide(),o.animate({left:s-r+"px"},"fast"),a.animate({left:r-s+"px"},"fast",(function(){t?e.prev().before(e):e.before(e.next()),o.css({position:"",left:""}),a.css({position:"",left:""}),n.css({display:""}),i.css({display:""}),saveBoard()}))}function openBoard(e){closeBoard(!0),NB.board=NB.storage.loadBoard(e,null),NB.storage.setActiveBoard(e),showBoard(!0)}function reopenBoard(e){var t=NB.board.id,o=$(".wrap .board > .head .menu .bulk").is(":visible");if(NB.storage.setBoardRevision(t,e),openBoard(t),o){var a=$(".wrap .board > .head .menu"),n=a.find(".teaser"),i=a.find(".bulk");n.hide().delay(100).queue((function(){$(this).css("display","").dequeue()})),i.show().delay(100).queue((function(){$(this).css("display","").dequeue()}))}}function closeBoard(e){if(NB.board){var t=$(".wrap .board");e?t.remove():t.animate({opacity:0},"fast").queue((function(){t.remove()})),NB.board=null,NB.storage.setActiveBoard(null),updateBoardIndex(),updatePageTitle()}}function addBoard(){closeBoard(!0),NB.board=new Board,showBoard(!0),$(".wrap .board .head").addClass("brand-new"),$(".wrap .board .head .text").click()}function saveBoard(){var e=$(".wrap .board"),t=Object.assign(new Board,NB.board);t.lists=[],e.find(".list").each((function(){var e=$(this),o=t.addList(getText(e.find(".head .text")));e.find(".note").each((function(){var e=$(this),t=o.addNote(getText(e.find(".text")));t.raw=e.hasClass("raw"),t.min=e.hasClass("collapsed")}))})),NB.storage.saveBoard(t),NB.board=t,updateUndoRedo(),updateBoardIndex()}function deleteBoard(){var e=$(".wrap .board .list"),t=NB.board.id;e.length&&!confirm("PERMANENTLY delete this board, all its lists and their notes?")||(closeBoard(),NB.storage.nukeBoard(t),updateBoardIndex())}function undoBoard(){if(!NB.board)return!1;for(var e=NB.storage.getBoardHistory(NB.board.id),t=NB.board.revision,o=0,a=0;a<e.length-1&&!o;a++)t==e[a]&&(o=e[a+1]);return o?(console.log("Undo -> "+o),reopenBoard(o),!0):(console.log("Undo - failed"),!1)}function redoBoard(){if(!NB.board)return!1;for(var e=NB.storage.getBoardHistory(NB.board.id),t=NB.board.revision,o=0,a=1;a<e.length&&!o;a++)t==e[a]&&(o=e[a-1]);return o?(console.log("Redo -> "+o),reopenBoard(o),!0):(console.log("Redo - failed"),!1)}function showBoard(e){var t=NB.board,o=$(".wrap"),a=$("tt .board"),n=$("tt .list"),i=$("tt .note"),r=a.clone(),s=r.find(".lists");r[0].board_id=t.id,setText(r.find(".head .text"),t.title),t.lists.forEach((function(e){var t=n.clone(),o=t.find(".notes");setText(t.find(".head .text"),e.title),e.notes.forEach((function(e){var t=i.clone();setText(t.find(".text"),e.text),e.raw&&t.addClass("raw"),e.min&&t.addClass("collapsed"),o.append(t)})),s.append(t)})),e?o.html("").append(r):o.html("").css({opacity:0}).append(r).animate({opacity:1}),updatePageTitle(),updateUndoRedo(),updateBoardIndex(),setupListScrolling()}function createDemoBoard(){var e=JSON.parse('{"format":20190412,"id":1555071015420,"revision":581,"title":"Welcome to Nullboard","lists":[{"title":"The User Manual","notes":[{"text":"This is a note.\\nA column of notes is a list.\\nA set of lists is a board.","raw":false,"min":false},{"text":"All data is saved locally.\\nThe whole thing works completely offline.","raw":false,"min":false},{"text":"Last 50 board revisions are retained.","raw":false,"min":false},{"text":"Ctrl-Z is Undo  -  goes one revision back.\\nCtrl-Y is Redo  -  goes one revision forward.","raw":false,"min":false},{"text":"Caveats","raw":true,"min":false},{"text":"Desktop-oriented.\\nMobile support is basically untested.","raw":false,"min":false},{"text":"Works in Firefox, Chrome is supported.\\nShould work in Safari, may work in Edge.","raw":false,"min":false},{"text":"Still very much in beta. Caveat emptor.","raw":false,"min":false},{"text":"Issues and suggestions","raw":true,"min":false},{"text":"Post them on Github.\\nSee \\"Nullboard\\" at the top left for the link.","raw":false,"min":false}]},{"title":"Things to try","notes":[{"text":"•   Click on a note to edit.","raw":false,"min":false},{"text":"•   Click outside of it when done editing.\\n•   Alternatively, use Shift-Enter.","raw":false,"min":false},{"text":"•   To discard changes press Escape.","raw":false,"min":false},{"text":"•   Try Ctrl-Enter, see what it does.\\n•   Try Ctrl-Shift-Enter too.","raw":false,"min":false},{"text":"•   Hover over a note to show its  ≡  menu.\\n•   Hover over  ≡  to reveal the options.","raw":false,"min":false},{"text":"•   X  deletes the note.\\n•   R changes how a note looks.\\n•   _  collapses the note.","raw":false,"min":false},{"text":"This is a raw note.","raw":true,"min":false},{"text":"This is a collapsed note. Only its first line is visible. Useful for keeping lists compact.","raw":false,"min":true}, {"text":"Links","raw":true,"min":false}, {"text":"Links pulse on hover and can be opened via the right-click menu  -  https://nullboard.io","raw":false,"min":false}, {"text":"Pressing CapsLock or Control highlights all links and makes them left-clickable.","raw":false,"min":false}]},{"title":"More things to try","notes":[{"text":"•   Drag notes around to rearrange.\\n•   Works between the lists too.","raw":false,"min":false},{"text":"•   Click on a list name to edit.\\n•   Enter to save, Esc to cancel.","raw":false,"min":false},{"text":"•   Try adding a new list.\\n•   Try deleting one. This  _can_  be undone.","raw":false,"min":false},{"text":"•   Same for the board name.","raw":false,"min":false},{"text":"Boards","raw":true,"min":false},{"text":"•   Check out   ≡   at the top right.","raw":false,"min":false},{"text":"•   Try adding a new board.\\n•   Try switching between the boards.","raw":false,"min":false},{"text":"•   Try deleting a board. Unlike deleting a\\n     list this  _cannot_  be undone.","raw":false,"min":false},{"text":"•   Export the board   (save to a file, as json)\\n•   Import the board   (load from a save)","raw":false,"min":false}]}]}');return!!e&&(e.id=+new Date,e.revision=0,NB.storage.saveBoard(e),NB.storage.setActiveBoard(e.id),Object.assign(new Board,e))}function exportBoard(){var e,t;if(NB.board){var o=NB.board;e=JSON.stringify(o),t=`Nullboard-${o.id}-${o.title}.nbx`}else{NB.storage.getBoardIndex();var a=[];boards.forEach((function(e,t){a.push(NB.storage.loadBoard(t,null))})),e=JSON.stringify(a),t="Nullboard.nbx"}return{blob:e="data:application/octet-stream,"+(e=encodeURIComponent(e)),file:t}}function checkImport(e){for(var t=["format","id","revision","title","lists"],o=0;o<t.length;o++)if(!e.hasOwnProperty(t[o]))return"Required board properties are missing.";return e.id&&e.revision&&Array.isArray(e.lists)?e.format!=NB.blobVersion?`Unsupported blob format "${e.format}", expecting "${NB.blobVersion}".`:null:"Required board properties are empty."}function importBoard(e){var t;try{t=JSON.parse(e)}catch(e){return alert("File is not in a valid JSON format."),!1}Array.isArray(t)||(t=[t]);for(var o,a,n=NB.storage.getBoardIndex(),i="",r=0;r<t.length;r++){var s=checkImport(c=t[r]);if(s)return alert(s),!1;var l=c.title||"(untitled board)";a=`"${l}", ID ${c.id}, revision ${c.revision}`,i+=`    ID ${c.id}, revision ${c.revision} - "${l}"    \n`}if(o=1==t.length?`Import a board called ${a} ?`:`About to import the following boards:\n\n${i}\nProceed?`,!confirm(o))return!1;var d="";for(r=0;r<t.length;r++){var c=t[r],u=!0;if(n.has(c.id)){var f=1==t.length?"with the same ID":c.id;if(confirm(`Board ${f} already exists. Overwrite it?`)&&confirm("OVERWRITE for sure?"))console.log(`Import: ${c.id} (${c.title} - will overwrite existing one`),u=!1;else{if(!confirm("Import the board under a new ID?")){console.log(`Import: ${c.id} (${c.title} - ID conflict, will not import`);continue}var h=+new Date;console.log(`Import: ${c.id} (${c.title} - will import as ${h}`),c.id=h}}if(u){var g=!1;n.forEach((e=>{g|=e.title==c.title})),g&&(c.title+=" (imported)")}if(c.revision--,!NB.storage.saveBoard(c))return alert(`Failed to save board ${c.id}. Import failed.`),!1;d||(d=t[0].id)}d&&openBoard(d)}function findBackupAgent(e){var t=null;return NB.storage.backups.agents.forEach((function(o){o.type==e.type&&o.conf.auth==e.conf.auth&&o.conf.base==e.conf.base&&(t=o)})),t}function setBackupConfigUi(e,t){if(t.enabled){var o=e.find(".status"),a=findBackupAgent(t),n="OK";a&&"error"==a.status&&(n=a.lastXhr.text,o.addClass("error")),o.find("input").val(n),o.css({display:"block"})}else e.addClass("off")}function getBackupConfigUi(){var e=NB.storage.getConfig(),t=e.backups.agents[0],o=e.backups.agents[1],a=$(".overlay .backup-conf"),n=a.find(".loc"),i=a.find(".rem"),r={loc:jsonClone(t),rem:jsonClone(o)};return r.loc.enabled=!n.hasClass("off"),r.loc.conf.auth=n.find(".auth").val(),r.rem.enabled=!i.hasClass("off"),r.rem.conf.base=i.find(".base").val(),r.rem.conf.auth=i.find(".auth").val(),r.loc.enabled&&!r.loc.conf.auth?(shakeControl(n.find(".auth")),null):r.rem.enabled&&!r.rem.conf.base?(shakeControl(i.find(".base")),null):r.rem.enabled&&!r.rem.conf.auth?(shakeControl(i.find(".auth")),null):r}function checkBackupConfig(e,t,o){var a=t.find(".status"),n=a.find("input");n.val("Checking..."),a.removeClass("error").slideDown(),t.delay(850).queue((function(){var t=new(NB.backupTypes.get(e.type))(e.id,e.conf,(function(){}));t.checkStatus((function(e){e?n.val("OK"):(n.val(t.lastXhr.text),a.addClass("error")),o()})),$(this).dequeue()}))}function configBackups(){var e=NB.storage.getConfig();if(2!=e.backups.agents.length)throw"Invalid conf.backups.agents[]";var t=$("tt .backup-conf").clone(),o=t[0],a=t.find(".loc"),n=t.find(".rem"),i=(new SimpleBackup).type,r=e.backups.agents[0],s=e.backups.agents[1];o.checking=0,a.find(".auth").val(r.conf.auth),n.find(".auth").val(s.conf.auth),n.find(".base").val(s.conf.base),setBackupConfigUi(a,r),setBackupConfigUi(n,s),r.enabled||s.enabled||t.addClass("off"),t.find(".opt").click((function(){var e=$(this).parent();return e.hasClass("off")?(e.find(".etc").css({opacity:0}).slideDown("fast").animate({opacity:1},"fast").queue((function(){e.removeClass("off"),t.removeClass("off"),$(this).css("opacity","").dequeue()})),e.find("input").first().delay(800).queue((function(){$(this).focus().dequeue()}))):e.find(".etc").animate({opacity:0},"fast").slideUp("fast").queue((function(){e.addClass("off"),a.hasClass("off")&&n.hasClass("off")&&t.addClass("off"),$(this).css({opacity:""}).dequeue()})),!1})),t.find(".check").click((function(){if(o.checking)return!1;var e=getBackupConfigUi();return!!e&&(e.loc.enabled&&(o.checking++,checkBackupConfig(e.loc,a,(function(){o.checking--}))),e.rem.enabled&&(o.checking++,checkBackupConfig(e.rem,n,(function(){o.checking--}))),!1)})),t.find(".ok").click((function(){var t=getBackupConfigUi();if(!t)return!1;t.loc.enabled&&!r.enabled&&(t.loc.id=i+"-"+e.backups.nextId++),t.rem.enabled&&!s.enabled&&(t.rem.id=i+"-"+e.backups.nextId++),e.backups.agents[0]=t.loc,e.backups.agents[1]=t.rem,NB.storage.initBackups(onBackupStatusChange),NB.storage.saveConfig(),hideOverlay()})),t.find("a.close").click((function(){hideOverlay()})),showOverlay(t)}function onBackupStatusChange(e){var t=NB.storage.backups.agents,o=$(".config");$(".config .teaser u");if(t.length){o.addClass("backups-on");var a=0,n=0;t.forEach((function(e){if("busy"==e.status)a++;else if("error"==e.status)n++;else{if("ready"!=e.status)throw`Unknown status [${e.status}] on backup agent ${e.id}`;0}})),n>0?o.addClass("backup-err").removeClass("backing-up"):a>0?o.addClass("backing-up").removeClass("backup-err"):o.removeClass("backing-up backup-err"),n||a||runPendingBackups()}else o.removeClass("backups-on backup-err backing-up")}function needsBackingUp(e,t,o){var a=!1;return o.forEach((function(o){var n=e[o];n?t.forEach((function(e){a=!n[e]})):a=!0})),a}function runPendingBackups(){console.log("Checking for pending backups...");var e=NB.storage.getConfig(),t=[];NB.storage.backups.agents.forEach((function(e){t.push(e.id)})),needsBackingUp(e.backupStatus,["conf"],t)&&(console.log("  Backing up app config..."),NB.storage.backupConfig()),NB.storage.getBoardIndex().forEach((function(e,o){if(needsBackingUp(e.backupStatus,["data","meta"],t)){console.log(`  Backing up board ${o}...`);var a=NB.storage.loadBoard(o);a&&NB.storage.backupBoard(o,a,e)}}))}function saveBoardOrder(){var e=$(".config .load-board"),t=1;e.each((function(){var e=parseInt($(this).attr("board_id"));NB.storage.setBoardUiSpot(e,t++)}))}function updatePageTitle(){var e="Nullboard";NB.board&&(e="NB - "+((e=NB.board.title)||"(untitled board)")),document.title=e}function updateUndoRedo(){var e=$(".board .menu .undo-board"),t=$(".board .menu .redo-board"),o=!1,a=!1;if(NB.board&&NB.board.revision){var n=NB.storage.getBoardHistory(NB.board.id),i=NB.board.revision;o=i!=n[n.length-1],a=i!=n[0]}o?e.show():e.hide(),a?t.show():t.hide()}function updateBoardIndex(){var e=$(".config .boards"),t=$(".config .exp-board"),o=$(".config .auto-backup"),a=$("tt .load-board"),n=($(".wrap .board"),NB.board&&NB.board.id),i=!0;e.html(""),e.hide();var r=NB.storage.getBoardIndex(),s=[];r.forEach((function(e,t){s.push({id:t,meta:e})})),s.sort((function(e,t){return t.meta.ui_spot&&e.meta.ui_spot>t.meta.ui_spot})),s.forEach((function(t){var o=a.clone();o.attr("board_id",t.id),o.html(t.meta.title),t.id==n&&o.addClass("active"),e.append(o),i=!1})),i?(t.hide(),o.hide()):(n?t.html("Export this board...").show():t.html("Export all boards...").show(),o.show()),i||e.show()}function setWhatsNew(){var e=NB.storage.getConfig();e.verSeen&&e.verSeen<NB.codeVersion&&($(".logo").addClass("updated"),$(".logo .alert").html("(updated)"));var t=$(".logo .view-changes"),o=t.attr("href")+"/?have="+NB.codeVersion;e.verSeen&&(o+="&seen="+e.verSeen),e.verLast&&(o+="&last="+e.verLast),t.attr("href",o)}function jsonMatch(e,t){return JSON.stringify(e)==JSON.stringify(t)}function jsonClone(e){return JSON.parse(JSON.stringify(e))}function htmlEncode(e){return $("tt .encoder").text(e).html()}function setText(e,t){e.attr("_text",t);if(t=(t=htmlEncode(t)).replace(/\b(https?:\/\/[^\s]+)/gm,(function(e){return'<a href="'+e+'" target=_blank>'+e+"</a>"})),NB.peek("fileLinks")){t=t.replace(/`(.*?)`/gm,(function(e,t){return link="file:///"+t.replace("\\","/"),'`<a href="'+link+'" target=_blank>'+t+"</a>`"}))}e.html(t)}function getText(e){return e.attr("_text")}function removeTextSelection(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}function shakeControl(e){e.css({position:"relative"}).focus().animate({left:"+4px"},60).animate({left:"-3px"},60).animate({left:"+2px"},60).animate({left:"0px"},60).queue((function(){e.css({position:"",left:""}).dequeue()}))}function startEditing(e,t){var o=e.parent(),a=o.find(".edit");o[0]._collapsed=o.hasClass("collapsed"),o.removeClass("collapsed"),a.val(getText(e)),a.width(e.width()),a.height(e.height()),o.addClass("editing"),a.focus()}function stopEditing(e,t,o){var a=e.parent();if(a.hasClass("editing")){a.removeClass("editing"),a[0]._collapsed&&a.addClass("collapsed");var n=a.find(".text"),i=e.val().trimRight(),r=getText(n),s=a.hasClass("brand-new");a.removeClass("brand-new"),t?s&&a.closest(".note, .list, .board").remove():o&&s&&!i.length?a.closest(".note, .list, .board").remove():((i!=r||s)&&(setText(n,i),a.parent().hasClass("board")&&(NB.board.title=i),updatePageTitle(),saveBoard()),s&&a.hasClass("list")&&addNote(a))}}function handleTab(e){var t=$(this),o=t.closest(".note"),a=e.shiftKey?o.prev():o.next();a.length&&(stopEditing(t,!1,!1),a.find(".text").click())}function setRevealState(e){var t=e.originalEvent;t.getModifierState&&(t.getModifierState("CapsLock")||t.getModifierState("Control"))?$("body").addClass("reveal"):$("body").removeClass("reveal")}function showDing(){$("body").addClass("ding").delay(250).queue((function(){$(this).removeClass("ding").dequeue()}))}function showOverlay(e){$(".overlay").html("").append(e).css({opacity:0,display:"flex"}).animate({opacity:1})}function hideOverlay(){$(".overlay").animate({opacity:0},(function(){$(this).hide()}))}function haveOverlay(){return"none"!=$(".overlay").css("display")}function formatLicense(){var e,t=document.head.childNodes[1].nodeValue,o=t.search("LICENSE"),a=t.search("Software:");e=(e=(e=(e=t.substr(o,a-o)).replace(/([^\n])\n\t/g,"$1 ")).replace(/\n\n\t/g,"\n\n")).replace(/([A-Z ]{7,})/g,"<u>$1</u>");var n=[],i=[];t.substr(a).trim().split("\n").forEach((function(e){e=e.split(":"),n.push(e[0].trim()+":"),i.push(e[1].trim())})),e+="<span>"+n.join("<br>")+"</span>",e+="<span>"+i.join("<br>")+"</span>";return[{text:"2-clause BSD license",href:"https://opensource.org/licenses/BSD-2-Clause/"},{text:"Commons Clause",href:"https://commonsclause.com/"}].forEach((function(t){e=e.replace(t.text,'<a href="'+t.href+'" target=_blank>'+t.text+"</a>")})),e.trim()}function adjustLayout(){var e=$("body"),t=$(".board");if(t.length){var o=getListWidth(),a=t.find(".list").length,n=a<2?o:(o+10)*a-10,i=e.width();if(n+190<=i)t.css("max-width",""),e.removeClass("crowded");else{var r=Math.floor((i-40)/(o+10));r=r<2?o:(o+10)*r-10,t.css("max-width",r+"px"),e.addClass("crowded")}}}function adjustListScroller(){var e=$(".board");if(e.length){var t=$(".board .lists"),o=$(".board .lists-scroller"),a=o.find("div"),n=e.width(),i=t[0].scrollWidth,r=a.outerWidth();i<=n+5?o.hide():(o.show(),i!=r&&(a.width(i),cloneScrollPos(t,o)))}}function cloneScrollPos(e,t){var o=e[0],a=t[0];o._busyScrolling?o._busyScrolling--:(a._busyScrolling++,a.scrollLeft=o.scrollLeft)}function setupListScrolling(){var e=$(".board .lists"),t=$(".board .lists-scroller");adjustListScroller(),e[0]._busyScrolling=0,t[0]._busyScrolling=0,t.on("scroll",(function(){cloneScrollPos(t,e)})),e.on("scroll",(function(){cloneScrollPos(e,t)})),adjustLayout()}function initDragAndDrop(){NB.noteDrag=new Drag2,NB.noteDrag.listSel=".board .list .notes",NB.noteDrag.itemSel=".note",NB.noteDrag.dragster="note-dragster",NB.noteDrag.onDragging=function(e){var t=this,o=$(t.item);if(e){var a=t.$drag;o.hasClass("collapsed")&&a.addClass("collapsed"),a.html("<div class=text></div>"),a.find(".text").html(o.find(".text").html()),t.org_loc=noteLocation(o),o.hasClass("collapsed")&&t.$drag.addClass("collapsed")}else this.org_loc!=noteLocation(o)&&saveBoard()},NB.loadDrag=new Drag2,NB.loadDrag.listSel=".config .boards",NB.loadDrag.itemSel="a.load-board",NB.loadDrag.dragster="load-dragster",NB.loadDrag.onDragging=function(e){if(e){var t=this.$drag;$(".config .teaser").css({display:"none"}),$(".config .bulk").css({display:"block",opacity:1}),t.html($(this.item).html())}else $(".config .teaser").css({display:""}),$(".config .bulk").show().delay(250).queue((function(){$(this).css({display:"",opacity:""}).dequeue()})),saveBoardOrder()}}function initFonts(){var e=0,t=[],o=[];function a(e){return!o.includes(e)&&t.includes(e)}function n(n,i){var r=n.family.match(/["']?f-([^"']*)/),s=r?r[1]:"";i?t.push(s):(console.log(`! Failed to load ${n.family} ${n.weight}`),o.push(s)),--e||function(){var e=NB.storage.getConfig();$(".config .switch-font").each((function(){a($(this).attr("font"))||$(this).remove()})),e.fontName&&!a(e.fontName)&&(NB.storage.setFontName(null),selectFont(null)),selectFont(e.fontName||"barlow"),e.fontSize&&setFontSize(e.fontSize),e.lineHeight&&setLineHeight(e.lineHeight),e.listWidth&&setListWidth(e.listWidth),updateVarsAndLayout()}()}NB.font=null,document.fonts.forEach((function(t){"loaded"!=t.status&&(console.log(`Loading ${t.family} ${t.weight} ...`),e++,t.load().then((function(){n(t,!0)})).catch((function(){n(t,!1)})))}))}function selectFont(e){$("html").removeClass("f-"+NB.font).addClass("f-"+e),NB.font=e;var t=$(".config .switch-font");t.removeClass("active"),t.filter('[font="'+e+'"]').addClass("active"),updateVarsAndLayout()}function getVar(name){var v=$("html").css(name),m=v.match(/^\s*calc\((.*)\)$/);return m&&(v=eval(m[1])),parseFloat(v)}function getFontSize(){return getVar("--fs")}function getLineHeight(){return getVar("--lh")}function getListWidth(){return parseInt(getVar("--lw"))}function updateFontSize(){var e=getFontSize();return $(".config .f-prefs .ui-fs .val").html(e.toFixed(1)),e}function updateLineHeight(){var e=getLineHeight();return $(".config .f-prefs .ui-lh .val").html(e.toFixed(1)),e}function updateListWidth(){var e=getListWidth();return $(".config .f-prefs .ui-lw .val").html(e.toFixed(0)),e}function updateVarsAndLayout(){updateFontSize(),updateLineHeight(),updateListWidth(),adjustLayout()}function setFontSize(e){return e=e.clamp(9,24),$("html").css("--fs",e+"").addClass("fs-set"),updateVarsAndLayout(),getLineHeight()<e&&setLineHeight(e),getFontSize()}function setLineHeight(e){var t=getFontSize();return e=(e=parseInt(10*e)/10).clamp(t,3*t),$("html").css("--lh",e+"").addClass("lh-set"),updateVarsAndLayout(),getLineHeight()}function setListWidth(e){return e=e.clamp(200,400),$("html").css("--lw",e+"").addClass("lw-set"),updateVarsAndLayout(),getListWidth()}function resetFontSize(){return $("html").css("--fs","").removeClass("fs-set"),updateVarsAndLayout(),updateFontSize()}function resetLineHeight(){return $("html").css("--lh","").removeClass("lh-set"),updateVarsAndLayout(),updateLineHeight()}function resetListWidth(){return $("html").css("--lw","").removeClass("lw-set"),updateVarsAndLayout(),updateListWidth()}function saveUiPrefs(){var e=$("html");NB.storage.setFontSize(e.hasClass("fs-set")?getFontSize():null),NB.storage.setLineHeight(e.hasClass("lh-set")?getLineHeight():null),NB.storage.setListWidth(e.hasClass("lw-set")?getListWidth():null)}window.onerror=function(e,t,o,a,n){return easyMartina||alert("Error occurred: "+n.message),!1},window.addEventListener("error",(function(e){return easyMartina||alert("Error occurred: "+e.error.message),!1})),$(window).on("blur",(function(){$("body").removeClass("reveal")})),$(document).on("keydown",(function(e){setRevealState(e)})),$(document).on("keyup",(function(e){var t=e.originalEvent;(setRevealState(e),"TEXTAREA"!=e.target.nodeName&&"INPUT"!=e.target.nodeName)&&(e.ctrlKey&&"KeyZ"==t.code?(e.shiftKey?redoBoard():undoBoard())||showDing():e.ctrlKey&&"KeyY"==t.code&&(redoBoard()||showDing()))})),$(".wrap").on("click",".board .text",(function(e){return this.was_dragged?(this.was_dragged=!1,!1):(NB.noteDrag.cancelPriming(),startEditing($(this),e),!1)})),$(".wrap").on("click",".board .note .text a",(function(e){return!$("body").hasClass("reveal")||(e.stopPropagation(),!0)})),$(".wrap").on("keydown",".board .edit",(function(e){var t=$(this),o=t.closest(".note"),a=t.closest(".list"),n=o.length>0,i=a.length>0;if(27==e.keyCode)return stopEditing(t,!0,!1),!1;if(9==e.keyCode)return handleTab.call(this,e),!1;if(13==e.keyCode&&e.altKey||13==e.keyCode&&e.shiftKey&&!e.ctrlKey)return stopEditing(t,!1,!1),!1;if(13==e.keyCode&&e.ctrlKey)return stopEditing(t,!1,!1),n?e.shiftKey?addNote(a,null,o):addNote(a,o):i?(o=a.find(".note").last(),addNote(a,o)):addList(),!1;if(13==e.keyCode&&!n)return stopEditing(t,!1,!1),!1;if(n&&e.altKey&&"ArrowUp"==e.key)return t.parent()[0]._collapsed=!0,stopEditing(t,!1,!1),!1;if(n&&e.altKey&&"ArrowDown"==e.key)return t.parent()[0]._collapsed=!1,stopEditing(t,!1,!1),!1;if(n&&e.altKey&&82==e.keyCode)return t.parent().toggleClass("raw"),stopEditing(t,!1,!1),!1;if(n&&"*"==e.key&&e.ctrlKey){var r=this.value,s=this.selectionStart,l=r.substr(0,s)+"• "+r.substr(this.selectionEnd);return t.val(l),this.selectionStart=this.selectionEnd=s+2,!1}return!0})),$(".wrap").on("keypress",".board .edit",(function(e){if(9==e.keyCode)return handleTab.call(this,e),!1})),$(".wrap").on("blur",".board .edit",(function(e){document.activeElement!=this&&stopEditing($(this),!1,!0)})),$(".wrap").on("input propertychange",".board .note .edit",(function(){var e=$(this).outerHeight()-$(this).height();$(this).height(10),this.scrollHeight>this.clientHeight&&$(this).height(this.scrollHeight-e)})),$(".config").on("click",".add-board",(function(){return addBoard(),!1})),$(".config").on("click",".load-board",(function(){var e=parseInt($(this).attr("board_id"));return NB.loadDrag.cancelPriming(),NB.board&&NB.board.id==e?closeBoard():openBoard(e),!1})),$(".wrap").on("click",".board .del-board",(function(){return deleteBoard(),!1})),$(".wrap").on("click",".board .undo-board",(function(){return undoBoard(),!1})),$(".wrap").on("click",".board .redo-board",(function(){return redoBoard(),!1})),$(".wrap").on("click",".board .add-list",(function(){return addList(),!1})),$(".wrap").on("click",".board .del-list",(function(){return deleteList($(this).closest(".list")),!1})),$(".wrap").on("click",".board .mov-list-l",(function(){return moveList($(this).closest(".list"),!0),!1})),$(".wrap").on("click",".board .mov-list-r",(function(){return moveList($(this).closest(".list"),!1),!1})),$(".wrap").on("click",".board .add-note",(function(){return addNote($(this).closest(".list")),!1})),$(".wrap").on("click",".board .del-note",(function(){return deleteNote($(this).closest(".note")),!1})),$(".wrap").on("click",".board .raw-note",(function(){return $(this).closest(".note").toggleClass("raw"),saveBoard(),!1})),$(".wrap").on("click",".board .collapse",(function(){return $(this).closest(".note").toggleClass("collapsed"),saveBoard(),!1})),$(".wrap").on("mousedown",".board .note .text",(function(e){NB.noteDrag.prime(this.parentNode,e)})),$(".config").on("mousedown","a.load-board",(function(e){$(".config a.load-board").length>1&&NB.loadDrag.prime(this,e)})),$(".config").on("mousedown",".ui-fs .val",(function(e){var t=getFontSize();NB.varAdjust.start(e,(function(e){setFontSize(t+e/50)}),saveUiPrefs)})),$(".config").on("mousedown",".ui-lh .val",(function(e){var t=getLineHeight();NB.varAdjust.start(e,(function(e){setLineHeight(t+e/50)}),saveUiPrefs)})),$(".config").on("mousedown",".ui-lw .val",(function(e){var t=getListWidth();NB.varAdjust.start(e,(function(e){setListWidth(t+e/5)}),saveUiPrefs)})),$(document).on("mouseup",(function(e){NB.noteDrag.end(),NB.loadDrag.end(),NB.varAdjust.end()})),$(document).on("mousemove",(function(e){setRevealState(e),NB.noteDrag.onMouseMove(e),NB.loadDrag.onMouseMove(e),NB.varAdjust.onMouseMove(e)})),$(".config .imp-board").on("click",(function(e){return $(".config .imp-board-select").click(),!1})),$(".config .imp-board-select").on("change",(function(){var e=this.files,t=new FileReader;return t.onload=function(e){importBoard(e.target.result)},t.readAsText(e[0]),!0})),$(".config .exp-board").on("click",(function(){var e=exportBoard();return $(this).attr("href",e.blob),$(this).attr("download",e.file),!0})),$(".config .auto-backup").on("click",(function(){configBackups()})),$(".config .section .title").on("click",(function(){return $(this).closest(".section").toggleClass("open"),!1})),$(".config").on("click",".switch-font",(function(){var e=$(this).attr("font");return selectFont(e),NB.storage.setFontName(e),!1})),$(".config .f-prefs .ui-fs .less").on("click",(function(){return setFontSize(parseInt(10*getFontSize())/10-.5),saveUiPrefs(),!1})),$(".config .f-prefs .ui-fs .val").on("click",(function(){if(NB.varAdjust.used)return!1;var e=resetFontSize();return getLineHeight()<e&&setLineHeight(e),saveUiPrefs(),!1})),$(".config .f-prefs .ui-fs .more").on("click",(function(){return setFontSize(parseInt(10*getFontSize())/10+.5),saveUiPrefs(),!1})),$(".config .f-prefs .ui-lh .less").on("click",(function(){return setLineHeight(parseInt(10*getLineHeight())/10-.1),saveUiPrefs(),!1})),$(".config .f-prefs .ui-lh .val").on("click",(function(){if(NB.varAdjust.used)return!1;var e=resetLineHeight();return e<getFontSize()&&setFontSize(e),saveUiPrefs(),!1})),$(".config .f-prefs .ui-lh .more").on("click",(function(){return setLineHeight(parseInt(10*getLineHeight())/10+.1),saveUiPrefs(),!1})),$(".config .f-prefs .ui-lw .less").on("click",(function(){return setListWidth(getListWidth()-5),saveUiPrefs(),!1})),$(".config .f-prefs .ui-lw .val").on("click",(function(){return NB.varAdjust.used||(resetListWidth(),saveUiPrefs()),!1})),$(".config .f-prefs .ui-lw .more").on("click",(function(){return setListWidth(getListWidth()+5),saveUiPrefs(),!1})),$(".config .switch-theme").on("click",(function(){var e=$("html");return e.toggleClass("theme-dark"),NB.storage.setTheme(e.hasClass("theme-dark")?"dark":""),!1})),$(".overlay").click((function(e){return e.originalEvent.target!=this||(hideOverlay(),!1)})),$(window).keydown((function(e){haveOverlay()&&27==e.keyCode&&hideOverlay()})),$(".view-about").click((function(){var e=$("tt .about").clone();return e.find("div").html(`Version ${NB.codeVersion}`),showOverlay(e),!1})),$(".view-license").click((function(){var e=$("tt .license").clone();return e.html(formatLicense()),showOverlay(e),!1})),$(".view-changes").click((function(){$(".logo").hasClass("updated")&&(NB.storage.setVerSeen(),$(".logo").removeClass("updated"))})),$(window).resize(adjustLayout),$("body").on("dragstart",(function(){return!1}));var NB={codeVersion:20231105,blobVersion:20190412,board:null,storage:null,peek:function(e){return this.storage.getConfig()[e]},poke:function(e,t){return this.storage.getConfig()[e]=t,this.storage.saveConfig()}};if(NB.storage=new Storage_Local,!NB.storage.open())throw easyMartina=!0,new Error;var boards=NB.storage.getBoardIndex();boards.forEach((function(e,t){var o=e.history.join(", ");console.log(`Found board ${t} - "${e.title}", revision ${e.current}, history [${o}], backup ${JSON.stringify(e.backupStatus)}`)}));var conf=NB.storage.getConfig();console.log(`Active:    [${conf.board}]`),console.log(`Theme:     [${conf.theme}]`),console.log(`Font:      [${conf.fontName}], size [${conf.fontSize||"-"}], line-height [${conf.lineHeight||"-"}]`),console.log(`FileLinks: [${conf.fileLinks}]`),console.log("Backups:   ",conf.backups),NB.backupTypes=new Map,NB.backupTypes.set((new SimpleBackup).type,SimpleBackup),NB.storage.initBackups(onBackupStatusChange),initFonts(),initDragAndDrop(),NB.varAdjust=new VarAdjust,conf.theme&&$("html").addClass("theme-"+conf.theme),conf.board&&openBoard(conf.board),adjustLayout(),updateBoardIndex(),setWhatsNew(),NB.storage.setVerLast(),NB.board||$(".config .load-board").length||(NB.board=createDemoBoard()),NB.board&&showBoard(!0),setInterval(adjustListScroller,100),setupListScrolling()</script>